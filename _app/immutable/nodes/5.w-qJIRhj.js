import{s as J,e as C,b as S,n as A,k,f as v,i as N,q as $,E as ie,A as fe,a as L,t as Z,d as M,g as ae,v as z,F as x,p as w,G as V,w as H,r as le,H as de}from"../chunks/scheduler.DFOe0VJx.js";import{S as W,i as X,b as oe,d as ce,m as he,t as U,c as pe,a as G,e as ue,g as me}from"../chunks/index.BpdU1tUZ.js";import{e as B}from"../chunks/each.D6YF6ztN.js";function ge(s,e,t,r){function i(n){return n instanceof t?n:new t(function(d){d(n)})}return new(t||(t=Promise))(function(n,d){function h(u){try{o(r.next(u))}catch(c){d(c)}}function l(u){try{o(r.throw(u))}catch(c){d(c)}}function o(u){u.done?n(u.value):i(u.value).then(h,l)}o((r=r.apply(s,[])).next())})}function _e(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var be=function s(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,n;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!s(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(n=Object.keys(e),r=n.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[i]))return!1;for(i=r;i--!==0;){var d=n[i];if(!s(e[d],t[d]))return!1}return!0}return e!==e&&t!==t},ve=_e(be);const ee="__googleMapsScriptId";var q;(function(s){s[s.INITIALIZED=0]="INITIALIZED",s[s.LOADING=1]="LOADING",s[s.SUCCESS=2]="SUCCESS",s[s.FAILURE=3]="FAILURE"})(q||(q={}));class T{constructor({apiKey:e,authReferrerPolicy:t,channel:r,client:i,id:n=ee,language:d,libraries:h=[],mapIds:l,nonce:o,region:u,retries:c=3,url:m="https://maps.googleapis.com/maps/api/js",version:a}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=r,this.client=i,this.id=n||ee,this.language=d,this.libraries=h,this.mapIds=l,this.nonce=o,this.region=u,this.retries=c,this.url=m,this.version=a,T.instance){if(!ve(this.options,T.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(T.instance.options)}`);return T.instance}T.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?q.FAILURE:this.done?q.SUCCESS:this.loading?q.LOADING:q.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(r=>{r?t(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(n=>!r[n]&&delete r[n]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(n=>{let d,h,l,o="The Google Maps JavaScript API",u="google",c="importLibrary",m="__ib__",a=document,f=window;f=f[u]||(f[u]={});const g=f.maps||(f.maps={}),p=new Set,b=new URLSearchParams,D=()=>d||(d=new Promise((O,P)=>ge(this,void 0,void 0,function*(){var j;yield h=a.createElement("script"),h.id=this.id,b.set("libraries",[...p]+"");for(l in n)b.set(l.replace(/[A-Z]/g,F=>"_"+F[0].toLowerCase()),n[l]);b.set("callback",u+".maps."+m),h.src=this.url+"?"+b,g[m]=O,h.onerror=()=>d=P(Error(o+" could not load.")),h.nonce=this.nonce||((j=a.querySelector("script[nonce]"))===null||j===void 0?void 0:j.nonce)||"",a.head.append(h)})));g[c]?console.warn(o+" only loads once. Ignoring:",n):g[c]=(O,...P)=>p.add(O)&&D().then(()=>g[c](O,...P))})(r);const i=this.libraries.map(n=>this.importLibrary(n));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),n=>{const d=new ErrorEvent("error",{error:n});this.loadErrorCallback(d)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function ye(s){let e;return{c(){e=C("div"),this.h()},l(t){e=S(t,"DIV",{id:!0,class:!0}),A(e).forEach(k),this.h()},h(){v(e,"id","map"),v(e,"class","w-100 vh-100")},m(t,r){N(t,e,r)},p:$,i:$,o:$,d(t){t&&k(e)}}}function we(s,e,t){const r=[],i=["#BC4749dd","#F2E8CF33","#F2E8CF"],n=["#BC4749","#F2E8CF","#F2E8CF"],d=ie();function h(a,f,g){d("itemClick",{restaurant:a,index:f,event:g})}let{restaurants:l}=e,{selectedRestaurant:o}=e,u,c;const m=new T({apiKey:"AIzaSyDcnv-wW9qVIVsXxZeFq0fjMCTAZAqWxFU",version:"weekly",libraries:["places"]});return fe(()=>{m.importLibrary("maps").then(async({Map:a,marker:f})=>{c=new a(document.getElementById("map"),{center:{lat:42.3601,lng:-71.0589},mapId:"plastic_evitable_map",zoom:12});const{AdvancedMarkerElement:g,PinElement:p}=await m.importLibrary("marker");l.forEach((b,D)=>{const O=new p({background:i[0],glyphColor:i[1],borderColor:i[2]}),P=new g({position:{lat:+b.lat,lng:+b.lng},map:c,content:O.element,title:b.name});r.push({marker:P,pin:O}),P.addListener("click",({domEvent:j,latLng:F})=>{h(b,D,j)})}),window.markers=r}).catch(a=>{console.error(a)})}),s.$$set=a=>{"restaurants"in a&&t(0,l=a.restaurants),"selectedRestaurant"in a&&t(1,o=a.selectedRestaurant)},s.$$.update=()=>{if(s.$$.dirty&6&&typeof o=="number"&&r.length){let{pin:a}=r[o];if(a.background=n[0],a.glyphColor=n[1],a.borderColor=n[2],typeof u=="number"){console.log(u);let{pin:f}=r[u];f.background=i[0],f.glyphColor=i[1],f.borderColor=i[2]}t(2,u=o)}},[l,o,u]}class ke extends W{constructor(e){super(),X(this,e,we,ye,J,{restaurants:0,selectedRestaurant:1})}}function te(s,e,t){const r=s.slice();return r[9]=e[t],r[11]=t,r}function re(s){let e,t=s[9]+"",r;return{c(){e=C("span"),r=Z(t),this.h()},l(i){e=S(i,"SPAN",{class:!0});var n=A(e);r=z(n,t),n.forEach(k),this.h()},h(){v(e,"class","b--black-20 ba-l bb-s bb-m black-50 dib br-pill-l f7 lh-solid ph2-l pv1-l mr2")},m(i,n){N(i,e,n),w(e,r)},p(i,n){n&1&&t!==(t=i[9]+"")&&H(r,t)},d(i){i&&k(e)}}}function Ee(s){let e,t,r,i,n,d,h,l,o,u="Order now",c,m,a=s[0].name+"",f,g,p,b=s[0].address+"",D,O,P,j,F=B(s[0].cuisines),E=[];for(let _=0;_<F.length;_+=1)E[_]=re(te(s,F,_));return{c(){e=C("article"),t=C("div"),r=C("img"),d=L(),h=C("div");for(let _=0;_<E.length;_+=1)E[_].c();l=L(),o=C("button"),o.textContent=u,c=L(),m=C("h2"),f=Z(a),g=L(),p=C("p"),D=Z(b),this.h()},l(_){e=S(_,"ARTICLE",{class:!0,role:!0});var I=A(e);t=S(I,"DIV",{class:!0});var y=A(t);r=S(y,"IMG",{src:!0,alt:!0,class:!0}),y.forEach(k),d=M(I),h=S(I,"DIV",{class:!0});var R=A(h);for(let K=0;K<E.length;K+=1)E[K].l(R);l=M(R),o=S(R,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(o)!=="svelte-jtiedh"&&(o.textContent=u),c=M(R),m=S(R,"H2",{class:!0});var Q=A(m);f=z(Q,a),Q.forEach(k),g=M(R),p=S(R,"P",{class:!0});var Y=A(p);D=z(Y,b),Y.forEach(k),R.forEach(k),I.forEach(k),this.h()},h(){x(r.src,i=s[0].image)||v(r,"src",i),v(r,"alt",n=s[0].name),v(r,"class","ba b--black-10 db br2 w3 h3"),v(t,"class","dtc w3 v-mid"),v(o,"class","f6 fw6 fr br-pill ph3 pv2 white bg2"),v(m,"class","f5 fw4 cb f5-l black mb1 mt2"),v(p,"class","cb black mb0 f6 mt2 o-50"),v(h,"class","dtc v-mid pl3"),v(e,"class",O="dt w-100 pa2 ma0 "+(s[1]&&"bg0")),v(e,"role","presentation")},m(_,I){N(_,e,I),w(e,t),w(t,r),w(e,d),w(e,h);for(let y=0;y<E.length;y+=1)E[y]&&E[y].m(h,null);w(h,l),w(h,o),w(h,c),w(h,m),w(m,f),w(h,g),w(h,p),w(p,D),P||(j=[V(o,"click",s[5]),V(e,"click",s[6]),V(e,"keyup",s[7])],P=!0)},p(_,[I]){if(I&1&&!x(r.src,i=_[0].image)&&v(r,"src",i),I&1&&n!==(n=_[0].name)&&v(r,"alt",n),I&1){F=B(_[0].cuisines);let y;for(y=0;y<F.length;y+=1){const R=te(_,F,y);E[y]?E[y].p(R,I):(E[y]=re(R),E[y].c(),E[y].m(h,l))}for(;y<E.length;y+=1)E[y].d(1);E.length=F.length}I&1&&a!==(a=_[0].name+"")&&H(f,a),I&1&&b!==(b=_[0].address+"")&&H(D,b),I&2&&O!==(O="dt w-100 pa2 ma0 "+(_[1]&&"bg0"))&&v(e,"class",O)},i:$,o:$,d(_){_&&k(e),le(E,_),P=!1,de(j)}}}function Ie(s,e,t){const r=ie();let{index:i}=e,{restaurant:n}=e,{selected:d}=e;function h(){r("itemClick",{restaurant:n,index:i})}function l(m){r("placeOrder",{restaurant:m,index:i})}const o=m=>l(n),u=m=>h(),c=m=>{m.key==="Enter"&&h()};return s.$$set=m=>{"index"in m&&t(4,i=m.index),"restaurant"in m&&t(0,n=m.restaurant),"selected"in m&&t(1,d=m.selected)},[n,d,h,l,i,o,u,c]}class Ce extends W{constructor(e){super(),X(this,e,Ie,Ee,J,{index:4,restaurant:0,selected:1})}}function se(s,e,t){const r=s.slice();return r[6]=e[t],r[8]=t,r}function ne(s){let e,t,r,i,n;function d(){return s[4](s[8])}function h(){return s[5](s[6],s[8])}return r=new Ce({props:{index:s[8],restaurant:s[6],selected:s[1]===s[8]}}),r.$on("itemClick",d),r.$on("placeOrder",h),{c(){e=C("div"),t=L(),oe(r.$$.fragment),i=L(),this.h()},l(l){e=S(l,"DIV",{class:!0}),A(e).forEach(k),t=M(l),ce(r.$$.fragment,l),i=M(l),this.h()},h(){v(e,"class","ma0 bb o-30")},m(l,o){N(l,e,o),N(l,t,o),he(r,l,o),N(l,i,o),n=!0},p(l,o){s=l;const u={};o&1&&(u.restaurant=s[6]),o&2&&(u.selected=s[1]===s[8]),r.$set(u)},i(l){n||(U(r.$$.fragment,l),n=!0)},o(l){G(r.$$.fragment,l),n=!1},d(l){l&&(k(e),k(t),k(i)),ue(r,l)}}}function Se(s){let e,t,r,i="These restaurants use safe glass packaging.",n,d,h,l,o,u=B(s[0].restaurants),c=[];for(let a=0;a<u.length;a+=1)c[a]=ne(se(s,u,a));const m=a=>G(c[a],1,1,()=>{c[a]=null});return l=new ke({props:{restaurants:s[0].restaurants,selectedRestaurant:s[1]}}),l.$on("itemClick",s[3]),{c(){e=C("section"),t=C("main"),r=C("h4"),r.textContent=i,n=L();for(let a=0;a<c.length;a+=1)c[a].c();d=L(),h=C("aside"),oe(l.$$.fragment),this.h()},l(a){e=S(a,"SECTION",{class:!0});var f=A(e);t=S(f,"MAIN",{class:!0});var g=A(t);r=S(g,"H4",{class:!0,"data-svelte-h":!0}),ae(r)!=="svelte-zebtjr"&&(r.textContent=i),n=M(g);for(let b=0;b<c.length;b+=1)c[b].l(g);g.forEach(k),d=M(f),h=S(f,"ASIDE",{class:!0});var p=A(h);ce(l.$$.fragment,p),p.forEach(k),f.forEach(k),this.h()},h(){v(r,"class","fw4 tracked gray mb3"),v(t,"class","fn br1 pa3 fl-ns w-60-m w-40-l pr4-ns h-100-ns overflow-auto"),v(h,"class","fn fl-ns w-40-m w-60-l"),v(e,"class","cf vh-100")},m(a,f){N(a,e,f),w(e,t),w(t,r),w(t,n);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(t,null);w(e,d),w(e,h),he(l,h,null),o=!0},p(a,[f]){if(f&7){u=B(a[0].restaurants);let p;for(p=0;p<u.length;p+=1){const b=se(a,u,p);c[p]?(c[p].p(b,f),U(c[p],1)):(c[p]=ne(b),c[p].c(),U(c[p],1),c[p].m(t,null))}for(me(),p=u.length;p<c.length;p+=1)m(p);pe()}const g={};f&1&&(g.restaurants=a[0].restaurants),f&2&&(g.selectedRestaurant=a[1]),l.$set(g)},i(a){if(!o){for(let f=0;f<u.length;f+=1)U(c[f]);U(l.$$.fragment,a),o=!0}},o(a){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)G(c[f]);G(l.$$.fragment,a),o=!1},d(a){a&&k(e),le(c,a),ue(l)}}}function Oe(s,e){alert("ordeing from "+s.name)}function Re(s,e,t){let{data:r}=e,i=null;function n(o){t(1,i=o),console.log(i)}function d({detail:o}){n(o.index)}const h=o=>n(o),l=(o,u)=>Oe(o);return s.$$set=o=>{"data"in o&&t(0,r=o.data)},[r,i,n,d,h,l]}class De extends W{constructor(e){super(),X(this,e,Re,Se,J,{data:0})}}export{De as component};
